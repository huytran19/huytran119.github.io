"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[630],{100:function(t,e,n){var r=n(5),i=n(0),s=n(4),o=n.n(s),a=function(){function t(){this.payments=void 0}var e=t.prototype;return e.getLocale=function(){return null},e.getPlatform=function(){return null},e.getSDKVersion=function(){return"0.0"},e.getFlags=function(){return Promise.reject()},e.getSupportedAPIs=function(){return[]},e.getEntryPointData=function(){return null},e.getEntryPointAsync=function(){return new Promise((function(t){t("")}))},e.canCreateShortcutAsync=function(){return new Promise((function(t,e){e(new Error("Not implemented"))}))},e.quit=function(){},e.performHapticFeedbackAsync=function(){return Promise.resolve()},t}(),u=function(){function t(){}var e=t.prototype;return e.getID=function(){return null},e.getType=function(){return"SOLO"},t}(),c=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.sdk=e,n}(0,i.Z)(e,t);var n=e.prototype;return n.getID=function(){return this.sdk.getID()},n.getType=function(){return this.sdk.getType()},n.isSizeBetween=function(t,e){return this.sdk.isSizeBetween(t,e)},n.switchAsync=function(t){return this.sdk.switchAsync(t)},n.chooseAsync=function(t){return this.sdk.chooseAsync(t)},n.createAsync=function(t){return this.sdk.createAsync(t)},n.getPlayersAsync=function(){return this.sdk.getPlayersAsync()},e}(u),d=c,l=function(){},f=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.sdk=e,n}(0,i.Z)(e,t);var n=e.prototype;return n.getID=function(){return this.sdk.getID()},n.getASIDAsync=function(){return this.sdk.getASIDAsync()},n.getSignedASIDAsync=function(){return this.sdk.getSignedASIDAsync()},n.getName=function(){return this.sdk.getName()},n.getPhoto=function(){return this.sdk.getPhoto()},n.getDataAsync=function(t){return this.sdk.getDataAsync(t)},n.setDataAsync=function(t){return this.sdk.setDataAsync(t)},n.flushDataAsync=function(){return this.sdk.flushDataAsync()},n.getSignedPlayerInfoAsync=function(t){return this.sdk.getSignedPlayerInfoAsync(t)},n.canSubscribeBotAsync=function(){return this.sdk.canSubscribeBotAsync()},n.subscribeBotAsync=function(){return this.sdk.subscribeBotAsync()},n.getConnectedPlayersAsync=function(){return this.sdk.getConnectedPlayersAsync()},n.isGuest=function(){return!1},n.signInManuallyAsync=function(){return Promise.resolve(!0)},e}(l),h=f,y=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.player=void 0,n.context=void 0,n.graphApi=void 0,n.tournament=void 0,n.sdk=e,n.player=new h(e.player),n.context=new d(e.context),n}(0,i.Z)(e,t);var n=e.prototype;return n.getLocale=function(){return this.sdk.getLocale()},n.getPlatform=function(){return this.sdk.getPlatform()},n.getSDKVersion=function(){return this.sdk.getSDKVersion()},n.initializeAsync=function(){return this.sdk.initializeAsync()},n.setLoadingProgress=function(t){this.sdk.setLoadingProgress(t)},n.getSupportedAPIs=function(){return this.sdk.getSupportedAPIs()},n.getEntryPointData=function(){return this.sdk.getEntryPointData()},n.getEntryPointAsync=function(){return this.sdk.getEntryPointAsync()},n.setSessionData=function(t){this.sdk.setSessionData(t)},n.startGameAsync=function(){return this.sdk.startGameAsync()},n.shareAsync=function(t){return this.sdk.shareAsync(t)},n.updateAsync=function(t){return this.sdk.updateAsync(t)},n.switchGameAsync=function(t,e){return this.sdk.switchGameAsync(t,e)},n.canCreateShortcutAsync=function(){return this.sdk.canCreateShortcutAsync()},n.createShortcutAsync=function(){return this.sdk.createShortcutAsync()},n.quit=function(){this.sdk.quit()},n.logEvent=function(t,e,n){return this.sdk.logEvent(t,e,n)},n.onPause=function(t){this.sdk.onPause(t)},n.getInterstitialAdAsync=function(t){return this.sdk.getInterstitialAdAsync(t)},n.getRewardedVideoAsync=function(t){return this.sdk.getRewardedVideoAsync(t)},n.matchPlayerAsync=function(t,e,n){return this.sdk.matchPlayerAsync(t,e,n)},n.checkCanPlayerMatchAsync=function(){return this.sdk.checkCanPlayerMatchAsync()},n.getLeaderboardAsync=function(t){return this.sdk.getLeaderboardAsync(t)},n.postSessionScoreAsync=function(t){return this.sdk.postSessionScoreAsync(t)},n.loadBannerAdAsync=function(t,e){return this.sdk.loadBannerAdAsync(t)},n.hideBannerAdAsync=function(){return this.sdk.hideBannerAdAsync()},n.showGameRating=function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.reject(new Error("CLIENT_UNSUPPORTED_OPERATION")));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.getTournamentAsync=function(){return this.sdk.getTournamentAsync()},n.inviteAsync=function(t){return this.sdk.inviteAsync(t)},n.shareLinkAsync=function(t){return this.sdk.shareLinkAsync(t)},n.submitGameResultsAsync=function(t){return Promise.reject(new Error("CLIENT_UNSUPPORTED_OPERATION"))},n.scheduleNotificationAsync=function(t){return Promise.reject(new Error("CLIENT_UNSUPPORTED_OPERATION"))},e}(a),g=y,p=n(8),m={instanceId:""},A=function(t){function e(e,n){var r;return(r=t.call(this)||this).sdk=void 0,r.type=void 0,r.response=void 0,r.loadAdsPromise=null,r.showAdsPromise=null,r.isLoadingTimedOut=!1,r.isShowAdsResolved=!0,r.sdk=n,r.type=e,r.response=m,r}(0,i.Z)(e,t);var n=e.prototype;return n.getPlacementID=function(){return this.response.instanceId},n.loadAsync=function(){var t=this;if(this.isLoadingTimedOut)return Promise.reject(new Error("Loading ads is currently timed out."));if(this.loadAdsPromise)return this.loadAdsPromise;var e=GameCore.Utils.Valid;return this.loadAdsPromise=new Promise((function(n,i){t.response&&t.response.instanceId!==m.instanceId&&n();var s=Promise.reject(new Error("Starting Point")),a=1;if(t.isLoadingTimedOut=!1,e.isNumber(window.$msstart.loadAdsRetryCount)){var u=window.$msstart.loadAdsRetryCount;u>0&&(a+=u)}for(var c=0;c<a;c++)s=s.catch(function(){var e=(0,r.Z)(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Request Throttled Error"!==n.message){e.next=2;break}return e.abrupt("return",Promise.reject(new Error("Request Throttled Error")));case 2:if(!t.isAdsLoadingTimedOutError(n)){e.next=8;break}if(!((r=t.getLoadingTimeoutDuration(n))>0)){e.next=8;break}return t.isLoadingTimedOut=!0,setTimeout((function(){t.isLoadingTimedOut=!1,t.loadAsync()}),1e3*r),e.abrupt("return",Promise.reject(new Error("Request Throttled Error")));case 8:return e.abrupt("return",t.sdk.loadAdsAsync({isRewardedAd:"rewarded"===t.type,canBackfill:!0}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());s=s.then((function(e){e?(t.response=e,n()):i(new Error("Ad is not loaded. Instance is empty"))})).catch((function(e){t.isAdsAlreadyLoadedError(e)?n():i(e)}))})).finally((function(){t.loadAdsPromise=null})),this.loadAdsPromise},n.isAdsAlreadyLoadedError=function(t){var e="";try{e=JSON.stringify(t)}catch(t){return!1}var n=e.includes("LOAD_ADS_CLIENT_FAILURE"),r=e.includes("Ads already loaded.");return n&&r},n.isAdsLoadingTimedOutError=function(t){var e="";try{e=JSON.stringify(t)}catch(t){return!1}return e.includes("REQUEST_THROTTLED")},n.getLoadingTimeoutDuration=function(t){var e="";try{e=JSON.stringify(t)}catch(t){return 0}var n=JSON.parse(e);if(!n.extra)return 0;var r=n.extra;return r.timeLeft?r.timeLeft:0},n.showAsync=function(){var t=(0,r.Z)(o().mark((function t(){var e,n,r,i=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,n=new Promise((function(t,n){setTimeout((function(){e?t():n(new Error("Show ads is timed out"))}),8e3)})),r=new Promise((function(t,n){i.response.instanceId?!i.showAdsPromise||i.isShowAdsResolved?(i.isShowAdsResolved=!1,i.showAdsPromise=i.sdk.showAdsAsync(i.response.instanceId).then((function(r){r.showAdsCompletedAsync?(e=r.showAdsCompletedAsync,r.showAdsCompletedAsync.then((function(){i.response=m,t()})).catch((function(t){t.code&&"SHOW_ADS_COMPLETED_FAILURE"===t.code&&(t.code="USER_INPUT"),n(t)}))):n(new Error("Ad is not loaded. showAdsCompletedAsync is empty"))})).catch((function(t){n(t)})).finally((function(){i.showAdsPromise=null,i.isShowAdsResolved=!0}))):n(new Error("Show ads is already in progress")):n(new Error("Ad is not loaded. InstanceId is empty"))})),t.abrupt("return",new Promise((function(t,e){Promise.all([n,r]).then((function(){t()})).catch((function(t){e(t)}))})));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e}((function(){})),v=A,w=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.sdk=e,n}(0,i.Z)(e,t);var n=e.prototype;return n.getID=function(){return null},n.getType=function(){return"SOLO"},n.isSizeBetween=function(t,e){return null},n.switchAsync=function(t){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.chooseAsync=function(){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.createAsync=function(t){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.getPlayersAsync=function(){return new Promise((function(t,e){e(new Error("Unsupported"))}))},e}(u),S=w,P=n(69),I="Solitaire TriPeaks Journey",k=I+"_GuestID",D=I+"_GuestName",b=I+"_GuestData",L=I+"GuestStats",_=function(){function t(t){this._personalInfo=void 0,this._uniqueId=void 0,this.photo=void 0,this._playerData=void 0,this._playerStats=void 0,this._uniqueId=t.playerId,localStorage.setItem(k,this._uniqueId),this._personalInfo={id:this._uniqueId,avatarIdHash:"0",lang:"en",publicName:this.checkAndGetNameFromLocalStorage(),uniqueID:this._uniqueId,scopePermissions:{avatar:"forbid",public_name:"forbid"}},this._playerData=this.getDataFromLocalStorage(),this._playerStats=this.getStatsFromLocalStorage()}var e=t.prototype;return e.getUniqueID=function(){return this._uniqueId},e.getName=function(){return this._personalInfo.publicName},e.getPhoto=function(){return""},e.getMode=function(){return"logged"},e.getData=function(t){var e=this;if(t){var n=t.reduce((function(t,n){var r;return(0,p.Z)({},t,((r={})[n]=e._playerData[n],r))}),{});return Promise.resolve(n)}return Promise.resolve(this._playerData)},e.setData=function(t){return this._playerData=(0,p.Z)({},this._playerData,t),this.writeDataToLocalStorage(this._playerData),Promise.resolve(!0)},e.setStats=function(t){return this._playerStats=(0,p.Z)({},this._playerStats,t),this.writeStatsToLocalStorage(this._playerStats),Promise.resolve(!0)},e.incrementStats=function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=n[e],i=r[0],s=r[1];this._playerStats[i]=(this._playerStats[i]||0)+s}return this.writeStatsToLocalStorage(this._playerStats),Promise.resolve(this._playerStats)},e.getStats=function(t){var e=this;if(t){var n=t.reduce((function(t,n){var r;return(0,p.Z)({},t,((r={})[n]=e._playerStats[n],r))}),{});return Promise.resolve(n)}return Promise.resolve(this._playerStats)},e.checkAndGetNameFromLocalStorage=function(){var t=localStorage.getItem(D);if(null!=t)return t;var e=(0,P.Z)();return localStorage.setItem(D,e),e},e.getDataFromLocalStorage=function(){var t=localStorage.getItem(b);return t?JSON.parse(t):{}},e.writeDataToLocalStorage=function(t){return localStorage.setItem(b,JSON.stringify(t))},e.getStatsFromLocalStorage=function(){var t=localStorage.getItem(L);return t?JSON.parse(t):{}},e.writeStatsToLocalStorage=function(t){return localStorage.setItem(L,JSON.stringify(t))},t}(),E=n(27),x="Solitaire TriPeaks Journey",T=x+"_GuestID",N=x+"_GuestName",O=x+"_GuestData",B=x+"GuestStats",G=function(){function t(){this._personalInfo=void 0,this._uniqueId=void 0,this._playerData=void 0,this._playerStats=void 0,this._uniqueId=this.checkAndGetIdFromLocalStorage(),this._personalInfo={id:this._uniqueId,avatarIdHash:"0",lang:"en",publicName:this.checkAndGetNameFromLocalStorage(),uniqueID:this._uniqueId,scopePermissions:{avatar:"forbid",public_name:"forbid"}},this._playerData=this.getDataFromLocalStorage(),this._playerStats=this.getStatsFromLocalStorage()}var e=t.prototype;return e.getUniqueID=function(){return this._uniqueId},e.getName=function(){return this._personalInfo.publicName},e.getPhoto=function(){return""},e.getMode=function(){return"guest"},e.getData=function(t){var e=this;if(t){var n=t.reduce((function(t,n){var r;return(0,p.Z)({},t,((r={})[n]=e._playerData[n],r))}),{});return Promise.resolve(n)}return Promise.resolve(this._playerData)},e.setData=function(t){return this._playerData=(0,p.Z)({},this._playerData,t),this.writeDataToLocalStorage(this._playerData),Promise.resolve(!0)},e.setStats=function(t){return this._playerStats=(0,p.Z)({},this._playerStats,t),this.writeStatsToLocalStorage(this._playerStats),Promise.resolve(!0)},e.incrementStats=function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=n[e],i=r[0],s=r[1];this._playerStats[i]=(this._playerStats[i]||0)+s}return this.writeStatsToLocalStorage(this._playerStats),Promise.resolve(this._playerStats)},e.getStats=function(t){var e=this;if(t){var n=t.reduce((function(t,n){var r;return(0,p.Z)({},t,((r={})[n]=e._playerStats[n],r))}),{});return Promise.resolve(n)}return Promise.resolve(this._playerStats)},e.checkAndGetIdFromLocalStorage=function(){var t=localStorage.getItem(T);if(null==t||t.includes("_")){var e=(0,E.Z)(10);return localStorage.setItem(T,e),e}return t},e.checkAndGetNameFromLocalStorage=function(){var t=localStorage.getItem(N);if(null!=t)return t;var e=(0,P.Z)();return localStorage.setItem(N,e),e},e.getDataFromLocalStorage=function(){var t=localStorage.getItem(O);return t?JSON.parse(t):{}},e.writeDataToLocalStorage=function(t){return localStorage.setItem(O,JSON.stringify(t))},e.getStatsFromLocalStorage=function(){var t=localStorage.getItem(B);return t?JSON.parse(t):{}},e.writeStatsToLocalStorage=function(t){return localStorage.setItem(B,JSON.stringify(t))},t}(),R="Solitaire TriPeaks Journey_LastLoginTime",U=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.player=void 0,n.signature="",n.sdk=e,n}(0,i.Z)(e,t);var n=e.prototype;return n.initPlayerAsync=function(){var t=(0,r.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.tryGettingSignedInPlayer();case 2:if(!(e=t.sent)){t.next=7;break}return this.player=new _(e),this.signature=e.playerId+" "+e.signature,t.abrupt("return");case 7:return this.player=new G,t.abrupt("return");case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.isLoginTimePassed=function(){var t=localStorage.getItem(R);if(!t)return!0;var e=Number(t);return Date.now()-e>864e5},n.tryGettingSignedInPlayer=function(){var t=(0,r.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=null,t.prev=1,t.next=4,this.sdk.getSignedInUserAsync();case 4:e=t.sent,t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.abrupt("return",Promise.resolve(e));case 10:case"end":return t.stop()}}),t,this,[[1,7]])})));return function(){return t.apply(this,arguments)}}(),n.rejectPlayerNotInitialized=function(){return Promise.reject(new Error("Player is not initialized"))},n.getID=function(){var t,e;return null!=(t=null==(e=this.player)?void 0:e.getUniqueID())?t:null},n.getASIDAsync=function(){var t;return Promise.resolve(null!=(t=this.getID())?t:"")},n.getSignedASIDAsync=function(){var t=this;return Promise.resolve({getASID:function(){var e;return null!=(e=t.getID())?e:""},getSignature:function(){return t.signature}})},n.getName=function(){var t,e,n=null!=(t=null==(e=this.player)?void 0:e.getName())?t:null;return""===n?"Anonymous":n},n.getPhoto=function(){var t,e;return null!=(t=null==(e=this.player)?void 0:e.getPhoto())?t:null},n.getDataAsync=function(t){var e=this;return new Promise((function(n,r){e.validateIsLogged(r),e.player.getData(t).then(n).catch(r)}))},n.setDataAsync=function(t){var e=this;return new Promise((function(n,r){e.validateIsLogged(r),e.getDataAsync().then((function(i){var s=(0,p.Z)({},i,t);e.player.setData(s).then((function(){n()})).catch(r)})).catch(r)}))},n.flushDataAsync=function(){var t,e;return null!=(t=null==(e=this.player)?void 0:e.setData({}).then())?t:this.rejectPlayerNotInitialized()},n.getSignedPlayerInfoAsync=function(){var t=this;return Promise.resolve({getPlayerID:function(){var e;return null!=(e=t.getID())?e:"10"},getSignature:function(){return t.signature}})},n.canSubscribeBotAsync=function(){return new Promise((function(t){t(!1)}))},n.subscribeBotAsync=function(){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.getStatsAsync=function(t){var e=this;return new Promise((function(n,r){e.validateIsLogged(r),n(e.player.getStats(t))}))},n.setStatsAsync=function(t){var e=this;return new Promise((function(n,r){e.validateIsLogged(r),e.player.setStats(t).then((function(){return n()})).catch(r)}))},n.incrementStatsAsync=function(t){var e=this;return new Promise((function(n,r){e.validateIsLogged(r),e.player.incrementStats(t).then(n).catch(r)}))},n.getConnectedPlayersAsync=function(){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.isGuest=function(){return!this.player||"guest"===this.player.getMode()},n.validateIsLogged=function(t){this.player||t(new Error("Player is not initialized"))},n.signInManuallyAsync=function(){var t=(0,r.Z)(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"logged"!==this.player.getMode()){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,this.sdk.signInAsync();case 5:return e=t.sent,this.player=new _(e),this.signature=e.playerId+" "+e.signature,t.next=10,window.game.auth.requestToken();case 10:if(this.isPlayerDataInitialized()){t.next=13;break}return t.abrupt("return",!0);case 13:return t.next=15,window.game.storage.initPlayerManually();case 15:return t.next=17,window.game.player.updateData();case 17:return n=window.game.player.getBestScore(),t.next=20,window.game.player.setBestScore(n);case 20:return t.abrupt("return",!0);case 23:return t.prev=23,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return",!1);case 27:case"end":return t.stop()}}),t,this,[[0,23]])})));return function(){return t.apply(this,arguments)}}(),n.isPlayerDataInitialized=function(){try{return!!window.game.player.getPlayerData()}catch(t){return!1}},e}(l),Z=U;function C(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var q="Solitaire TriPeaks Journey",F=function(t){function e(e){var n;return(n=t.call(this)||this).sdk=void 0,n.player=void 0,n.context=void 0,n.graphApi=void 0,n.tournament=void 0,n.rewardedAdInstance=void 0,n.interstitialAdInstance=void 0,n.currentPercentLoading=0,n.shareImageBase64=void 0,n.notificationImageBase64=void 0,n.initSDKAsync=function(){return new Promise((function(t){n.player=new Z(n.sdk),n.context=new S(n.sdk),n.rewardedAdInstance=new v("rewarded",n.sdk),n.interstitialAdInstance=new v("interstitial",n.sdk),n.player.initPlayerAsync().finally(t)}))},n.sdk=e,n}(0,i.Z)(e,t);var n=e.prototype;return n.loadImageAsync=function(){var t=(0,r.Z)(o().mark((function t(e){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.blob()})).then((function(t){var e=new FileReader;return new Promise((function(n,r){try{e.onload=function(){n(this.result)},e.onerror=r,e.readAsDataURL(t)}catch(i){r(i)}}))}));case 2:if(!(n=t.sent)||"string"!==typeof n){t.next=5;break}return t.abrupt("return",Promise.resolve(n));case 5:return t.abrupt("return",Promise.reject(new Error("Cannot load image")));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.getLocale=function(){var t=this.sdk.getLocale();return t.includes("-")?t.split("-")[0].toLowerCase():t.toLowerCase()},n.getSDKVersion=function(){return"v1.0.0-rc.12"},n.getSupportedAPIs=function(){return["getLocale","getSDKVersion","initializeAsync","startGameAsync","setLoadingProgress","getInterstitialAdAsync","getRewardedVideoAsync","getPlatform","loadBannerAdAsync","hideBannerAdAsync","getLeaderboardAsync","canCreateShortcutAsync","getPlayerEntryAsync"]},n.initializeAsync=function(){var t=this;return new Promise((function(e,n){var r=document.getElementById("lds-content");if(r)r.hidden=!1;else{var i='<div id="lds-content"><div id="loading-game-icon-blur"></div><div id="loading-game-icon"></div><div id="lds-text"><span id="lds-percent">0</span>% loaded</div></div>';"complete"===document.readyState?t.appendHtml(document.body,i):window.addEventListener("load",(function(){t.appendHtml(document.body,i)}))}t.initSDKAsync().then(e).catch(n)}))},n.startGameAsync=function(){var t;return this.setLoadingProgress(100),null==(t=document.getElementById("lds-content"))||t.remove(),Promise.resolve()},n.setLoadingProgress=function(t){var e=document.getElementById("lds-percent");e&&(this.currentPercentLoading=Math.round(Math.max(Math.min(t,100),this.currentPercentLoading)),e.innerHTML=""+this.currentPercentLoading,this.currentPercentLoading=t)},n.setSessionData=function(t){},n.shareAsync=function(){var t=(0,r.Z)(o().mark((function t(e){var n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.shareImageBase64){t.next=4;break}return t.next=3,this.loadImageAsync("./assets/images/others/share.jpg");case 3:this.shareImageBase64=t.sent;case 4:return t.abrupt("return",new Promise((function(t,e){n.sdk.shareAsync({title:q,text:"Play now!",image:n.shareImageBase64}).then((function(){return t()})).catch(e)})));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.updateAsync=function(t){return Promise.reject(new Error("Unsupported"))},n.switchGameAsync=function(t,e){return this.sdk.switchGameAsync({id:t,payloadData:e})},n.canCreateShortcutAsync=function(){return Promise.resolve(!0)},n.createShortcutAsync=function(){var t=this;return new Promise((function(e,n){console.info("\ud83d\ude80 > createShortcutAsync"),t.sdk.promptInstallAsync().then((function(){return e()})).catch(n)}))},n.logEvent=function(){return null},n.onPause=function(t){},n.getInterstitialAdAsync=function(t){var e=this;return new Promise((function(t){t(e.interstitialAdInstance)}))},n.getRewardedVideoAsync=function(t){var e=this;return new Promise((function(t){t(e.rewardedAdInstance)}))},n.matchPlayerAsync=function(t){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.checkCanPlayerMatchAsync=function(){return new Promise((function(t,e){e(!1)}))},n.getLeaderboardAsync=function(t){return new Promise((function(t,e){e(new Error("Unsupported"))}))},n.appendHtml=function(t,e){var n=document.createElement("div");for(n.innerHTML=e;n.children.length>0;)t.appendChild(n.children[0])},n.getPlatform=function(){var t=navigator.userAgent||navigator.vendor;return/android/i.test(t)?"ANDROID":/iPad|iPhone|iPod/.test(t)&&!window.MSStream?"IOS":"WEB"},n.postSessionScoreAsync=function(t){return Promise.reject(new Error("Unsupported"))},n.loadBannerAdAsync=function(t,e){for(var n,r=this,i=Array.isArray(e)?e:[e],s=[],o=C(i);!(n=o()).done;){var a=n.value,u=a.position+":"+a.bannerWidth+"x"+a.bannerHeight;this.isValidDisplayAdPlacement(u)&&s.push(u)}return 0===s.length?Promise.reject(new Error("Invalid banner ad placement")):new Promise((function(t,e){r.sdk.showDisplayAdsAsync(s).then((function(){return t()})).catch(e)}))},n.isValidDisplayAdPlacement=function(t){return!!["top:728x90","bottom:728x90","left:300x250","right:300x250","topleft:300x250","topright:300x250","bottomleft:300x250","bottomright:300x250","top:320x50","right:320x50","bottom:320x50","left:320x50","left:300x600","right:300x600","top:970x250","bottom:970x250","left:160x600","right:160x600"].includes(t)},n.hideBannerAdAsync=function(){var t=this;return new Promise((function(e,n){t.sdk.hideDisplayAdsAsync().then((function(){return e()})).catch(n)}))},n.showGameRating=function(){var t=(0,r.Z)(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.reject(new Error("Unsupported")));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n.getTournamentAsync=function(){return Promise.reject(new Error("Unsupported"))},n.getEntryPointAsync=function(){return Promise.resolve(this.sdk.getEntryPointInfo().entryPointId)},n.getEntryPointData=function(){try{var t=this.sdk.getEntryPointInfo(),e=this.sdk.getNotificationPayload();return(0,p.Z)({},t,{notificationPayload:e})}catch(n){return{}}},n.inviteAsync=function(t){return Promise.reject(new Error("Unsupported"))},n.shareLinkAsync=function(t){return Promise.reject(new Error("Unsupported"))},n.submitGameResultsAsync=function(t){return this.sdk.submitGameResultsAsync(t)},n.scheduleNotificationAsync=function(){var t=(0,r.Z)(o().mark((function t(e){var n,r,i=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.notificationImageBase64){t.next=4;break}return t.next=3,this.loadImageAsync("./assets/images/others/notification.jpg");case 3:this.notificationImageBase64=t.sent;case 4:return n={playerId:this.player.getID()||"Anonymous"},r={title:q,description:"We miss you!",type:0,minDelayInSeconds:3.6,imageData:this.notificationImageBase64,callToAction:"Play now!",payload:JSON.stringify(n)},r=(0,p.Z)({},r,e),t.abrupt("return",new Promise((function(t,e){console.info("\ud83d\ude80 > scheduleNotificationAsync:"),i.sdk.scheduleNotificationAsync(r).then((function(){return t()})).catch(e)})));case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(a),M=F;"FBInstant"in window&&(window.GameSDK=new g(window.FBInstant)),"$msstart"in window&&(window.GameSDK=new M(window.$msstart)),window.FBInstant=window.GameSDK}}]);