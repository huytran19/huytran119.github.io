"use strict";(self.webpackChunkgame_core=self.webpackChunkgame_core||[]).push([[545],{96:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var r=n(0),i=n(5),a=n(4),o=n.n(a),u='<div id="mock-tournaments"> <div style="color:#fff;display:flex;align-content:space-between;justify-content:space-between;flex-direction:column;flex-wrap:nowrap;position:absolute;font-family:sans-serif;background:#063b4d;background:linear-gradient(0deg,#063b4d 30%,#0e6171 100%);border-radius:10px" id="tournament-popup"> <div style="display:flex;flex-direction:column;flex-wrap:nowrap;align-content:center;justify-content:center;height:100%;align-items:center" id="tournament-content"> <span>Play with {TOURNAMENT_NAME}</span> </div> <div style="display:flex;height:6vh;background-color:#0b4d5b;flex-direction:row;justify-content:space-between;align-items:center;align-content:center;font-size:larger;border-radius:10px" id="tournament-header"> <div style="width:80px;display:flex;align-items:center;justify-content:center;margin:0 10px;cursor:pointer" id="close-tournament-btn"> Close </div> <div style="width:80px;display:flex;align-items:center;justify-content:center;margin:0 10px;cursor:pointer" id="tournament-join-btn"> Play </div> </div> </div> </div> ',c=n(70),s=n(74),d=GameCore.Configs,l=d.LeadersBoard,p=d.Tournament,m=l.LeaderboardId,f=(l.Limit,p.YourMockTournamentCount),h=function(t){return function(e){e.preventDefault();var n=document.getElementById("popup-tournament");null==n||n.remove(),t()}},y=function(){var t=(0,i.Z)(o().mark((function t(e,n,r){var i,a,c,d,l,p,m,f;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.Z)(window.game.globalScene,500);case 2:i=u.markup||u,(a=document.createElement("div")).id="popup-tournament",a.innerHTML=i.replace("{TOURNAMENT_NAME}",e),document.body.appendChild(a),(c=document.getElementById("tournament-popup"))&&(d=window.game.canvas.getBoundingClientRect(),l=.46*d.width,p=.25*d.height,c.style.width=l+"px",c.style.left="calc(50% - "+l/2+"px)",c.style.height=p+"px",c.style.top="calc(50% - "+p/2+"px)"),(m=document.getElementById("close-tournament-btn"))&&(m.onclick=h((function(){r({code:"USER_INPUT",message:"Player closed the context menu"})}))),(f=document.getElementById("tournament-join-btn"))&&(f.onclick=h(n));case 13:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),v=function(){function t(t,e){this.id=void 0,this.title=void 0,this.contextId=void 0,this.payload=void 0,this.endTime=void 0,this.initialScore=void 0,this.id=t,this.title=this.id+"'s Tournament",this.contextId="000-"+this.id,this.initialScore=0,this.payload=JSON.stringify({playerId:e||Phaser.Math.Between(1,5),playerName:"Player",leaderboardId:m}),this.initEndTime(void 0!==e)}var e=t.prototype;return e.initEndTime=function(t){var e=this,n=t||e.id>7?7:e.id;this.endTime=Math.round((Date.now()+864e5*n)/1e3)},e.getID=function(){return this.id},e.getTitle=function(){return this.title},e.getPayload=function(){return this.payload},e.getEndTime=function(){return this.endTime},e.getContextID=function(){return this.contextId},e.getInitialScore=function(){return this.initialScore},e.setCreatePayload=function(t){var e=t.initialScore,n=t.config,r=t.data;this.initialScore=e,n&&(this.title=n.tournamentTitle),r&&(this.payload=JSON.stringify(r))},t}(),g=function(t){function e(){var e,n;(n=t.call(this)||this).tournaments=void 0,n.tournamentData=void 0;var r=new v(1);return n.tournaments=[r],n.tournamentData=((e={})[1..toString()]=r,e),n.createYourMockTournaments(),n}(0,r.Z)(e,t);var n=e.prototype;return n.createAsync=function(){var t=(0,i.Z)(o().mark((function t(e){var n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var r,i=n.tournaments.length+1,a=new v(i,null==(r=e.data)?void 0:r.playerId);a.setCreatePayload(e),n.tournaments.push(a),n.tournamentData[i]=a,t(a)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.shareAsync=function(){var t=(0,i.Z)(o().mark((function t(e){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){return t()})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.joinAsync=function(){var t=(0,i.Z)(o().mark((function t(e){var n=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){if(e in n.tournamentData){var i=n.tournamentData[e].getTitle()||"Default Tournament Title";y(i,t,r)}else r(new Error("Tournament not found"))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.getTournamentsAsync=function(){var t=(0,i.Z)(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[].concat(this.tournaments),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.createYourMockTournaments=function(){for(var t=window.game.player.getPlayer(),e=t.playerId,n=t.name,r=0;r<f;r++){var i=1+r+1,a=new v(i);a.setCreatePayload({initialScore:0,config:{tournamentTitle:n+" 's Tournament"},data:{playerId:e,playerName:n,leaderboardId:m}}),this.tournaments.push(a),this.tournamentData[i]=a}},e}(c.J),w=g}}]);